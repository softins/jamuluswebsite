<!DOCTYPE html><!--[if IE 9]><html class="ie9"><![endif]--><html lang="zh-CN"><head><title>运行服务器 – Jamulus 网站</title><meta charset="utf-8"><link rel="canonical" hreflang="en" href="/wiki/Running-a-Server"><link rel="alternate" hreflang="sv-SE" href="/sv-SE/wiki/Running-a-Server"><link rel="alternate" hreflang="zh-CN" href="/zh-CN/wiki/Running-a-Server"><link rel="alternate" hreflang="nb-NO" href="/nb-NO/wiki/Running-a-Server"><link rel="alternate" hreflang="ko-KR" href="/ko-KR/wiki/Running-a-Server"><link rel="alternate" hreflang="pt-BR" href="/pt-BR/wiki/Running-a-Server"><link rel="alternate" hreflang="pt-PT" href="/pt-PT/wiki/Running-a-Server"><link rel="alternate" hreflang="nl" href="/nl/wiki/Running-a-Server"><link rel="alternate" hreflang="es" href="/es/wiki/Running-a-Server"><link rel="alternate" hreflang="de" href="/de/wiki/Running-a-Server"><link rel="alternate" hreflang="it" href="/it/wiki/Running-a-Server"><link rel="alternate" hreflang="fr" href="/fr/wiki/Running-a-Server"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/assets/css/fox.min.css"><link rel="stylesheet" href="/assets/css/fw.css"><link rel="stylesheet" href="/assets/css/langsel.css"><noscript><link rel="stylesheet" href="/assets/css/noscript.css"></noscript><meta name="description" content=""><link rel="apple-touch-icon" sizes="57x57" href="/zh-CN/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/zh-CN/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/zh-CN/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/zh-CN/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/zh-CN/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/zh-CN/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/zh-CN/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/zh-CN/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/zh-CN/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/zh-CN/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/zh-CN/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/zh-CN/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/zh-CN/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><meta name="color-scheme" content="dark light"><link rel="author" href="/humans.txt"><script src="/assets/js/nav.js"></script><link rel="stylesheet" href="/assets/css/wiki.css"></head><body class="wikisite"><header class="fx-row fx-row-between-xs fx-text-center"><div class="fx-col fx-text-center"><a href="/zh-CN/"><img alt="杰穆鲁斯图标。链接到主页" width="40" height="40" src="/assets/img/jamulus-icon-2020.svg"></a></div><div class="fx-col-center-xs fx-txt-right hide-on-dt"><a href="#mnv" onclick="showNav();return false;"><svg role="img" width="20" height="20" aria-labelledby="ntitle" id="navbtn" class="hide-on-dt"><title id="ntitle">打开导航</title><g><rect fill="currentcolor" id="r1" width="100%" height="3" x="0" y="0"/><rect fill="currentcolor" id="r2" width="100%" height="3" x="0" y="8"/><rect fill="currentcolor" id="r3" width="100%" height="3" x="0" y="16"/></g></svg></a></div></header><div class="fx-row fx-row-center-xs"><aside id="gnav" class="fx-col-100-xs fx-col-25-m"><div id="langselect-container"><div id="langselect"><form method="get" id="language-form"><div class="language-dropdown"><select id="language-select" name="language-select" onchange="location = this.value;"><option value="/de/wiki/Running-a-Server"> Deutsch </option><option value="/wiki/Running-a-Server"> English </option><option value="/es/wiki/Running-a-Server"> Español </option><option value="/fr/wiki/Running-a-Server"> Français </option><option value="/it/wiki/Running-a-Server"> Italiano </option><option value="/ko-KR/wiki/Running-a-Server"> 한국어 </option><option value="/nb-NO/wiki/Running-a-Server"> Norsk (bokmål) </option><option value="/nl/wiki/Running-a-Server"> Nederlands </option><option value="/pt-BR/wiki/Running-a-Server"> Português (Brasil) </option><option value="/pt-PT/wiki/Running-a-Server"> Português (Portugal) </option><option value="/sv-SE/wiki/Running-a-Server"> Svenska </option><option value="/zh-CN/wiki/Running-a-Server" selected> 简体中文 </option></select></div></form><noscript><ul class="language-list"><li><a href="/de/wiki/Running-a-Server" data-slang="de">de</a></li><li><a href=" /wiki/Running-a-Server" data-slang="en">en</a></li><li><a href="/es/wiki/Running-a-Server" data-slang="es">es</a></li><li><a href="/fr/wiki/Running-a-Server" data-slang="fr">fr</a></li><li><a href="/it/wiki/Running-a-Server" data-slang="it">it</a></li><li><a href="/ko-KR/wiki/Running-a-Server" data-slang="ko-KR">ko-KR</a></li><li><a href="/nb-NO/wiki/Running-a-Server" data-slang="nb-NO">nb-NO</a></li><li><a href="/nl/wiki/Running-a-Server" data-slang="nl">nl</a></li><li><a href="/pt-BR/wiki/Running-a-Server" data-slang="pt-BR">pt-BR</a></li><li><a href="/pt-PT/wiki/Running-a-Server" data-slang="pt-PT">pt-PT</a></li><li><a href="/sv-SE/wiki/Running-a-Server" data-slang="sv-SE">sv-SE</a></li><li class="selected" data-slang="zh-CN">zh-CN</li></ul></noscript></div></div><nav id="mnv"><ul><li><h3>使用 Jamulus</h3><ul><li><a href="/zh-CN/wiki/Getting-Started" rel="alternate" class="">设置</a><ul><li><a href="/zh-CN/wiki/Installation-for-Windows" rel="alternate" class="">Windows</a></li><li><a href="/zh-CN/wiki/Installation-for-Macintosh" rel="alternate" class="">macOS</a></li><li><a href="/zh-CN/wiki/Installation-for-Linux" rel="alternate" class="">Linux</a></li></ul></li><li><a href="/zh-CN/wiki/Software-Manual" rel="alternate" class="">用户手册</a></li><li><a href="/zh-CN/wiki/FAQ" rel="alternate" class="">常见问题</a></li><li><a href="/zh-CN/wiki/Client-Troubleshooting" rel="alternate" class="">故障排除</a></li></ul></li><li><h3>更多</h3><ul><li><a href="/zh-CN/wiki/Running-a-Server" rel="alternate" class="selected">服务手册</a></li><li><a href="/zh-CN/wiki/Tips-Tricks-More" rel="alternate" class="">提示与技巧</a></li><li><a href="/zh-CN/kb/index.html" rel="alternate" class="">社区知识库</a></li><li><a href="/zh-CN/wiki/Privacy-Statement" rel="alternate" class="">隐私声明</a></li></ul></li></ul><div id="cc">本文档为 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">CC BY-SA</a> 授权</div></nav></aside><div id="maincontainer" class="fx-col-100-xs fx-col-50-m"><noscript class="red"><strong>您的浏览器禁用了 JavaScript。这完全没问题。该站点旨在提供没有 JS 的基本功能。启用 JavaScript 可能会在本网站上为您提供额外的功能。</strong></noscript><main lang="zh-CN"><h1 class="no_toc" id="服务器管理手册">服务器管理手册</h1><details><summary>目录</summary><ul id="markdown-toc"><li><a href="#我需要运行服务器吗" id="markdown-toc-我需要运行服务器吗">我需要运行服务器吗？</a></li><li><a href="#要求" id="markdown-toc-要求">要求</a><ul><li><a href="#速度和延迟" id="markdown-toc-速度和延迟">速度和延迟</a></li><li><a href="#一般说明" id="markdown-toc-一般说明">一般说明</a></li></ul></li><li><a href="#安装" id="markdown-toc-安装">安装</a></li><li><a href="#服务器模式" id="markdown-toc-服务器模式">服务器模式</a><ul><li><a href="#未注册模式" id="markdown-toc-未注册模式">未注册模式</a></li><li><a href="#已注册模式" id="markdown-toc-已注册模式">已注册模式</a></li><li><a href="#目录模式" id="markdown-toc-目录模式">目录模式</a></li></ul></li><li><a href="#配置选项" id="markdown-toc-配置选项">配置选项</a><ul><li><a href="#在注册模式下运行的最低设置" id="markdown-toc-在注册模式下运行的最低设置">在注册模式下运行的最低设置</a></li><li><a href="#服务器模式相关选项" id="markdown-toc-服务器模式相关选项">服务器模式相关选项</a><ul><li><a href="#-e-或---directoryaddress" id="markdown-toc--e-或---directoryaddress"><code class="language-plaintext highlighter-rouge">-e 或 --directoryaddress</code></a></li><li><a href="#-o-或---serverinfo" id="markdown-toc--o-或---serverinfo"><code class="language-plaintext highlighter-rouge">-o 或 --serverinfo</code></a></li><li><a href="#-l-或---licence" id="markdown-toc--l-或---licence"><code class="language-plaintext highlighter-rouge">-L 或 --licence</code></a></li><li><a href="#-w-或---welcomemessage" id="markdown-toc--w-或---welcomemessage"><code class="language-plaintext highlighter-rouge">-w 或 --welcomemessage</code></a></li><li><a href="#--serverpublicip" id="markdown-toc---serverpublicip"><code class="language-plaintext highlighter-rouge">--serverpublicip</code></a></li><li><a href="#--directoryfile" id="markdown-toc---directoryfile"><code class="language-plaintext highlighter-rouge">--directoryfile</code></a></li><li><a href="#-f-或---listfilter" id="markdown-toc--f-或---listfilter"><code class="language-plaintext highlighter-rouge">-f 或 --listfilter</code></a></li></ul></li><li><a href="#常规服务器选项" id="markdown-toc-常规服务器选项">常规服务器选项</a><ul><li><a href="#-d-或---discononquit" id="markdown-toc--d-或---discononquit"><code class="language-plaintext highlighter-rouge">-d 或 --discononquit</code></a></li><li><a href="#-f-或---fastupdate" id="markdown-toc--f-或---fastupdate"><code class="language-plaintext highlighter-rouge">-F 或 --fastupdate</code></a></li><li><a href="#-l-或---log" id="markdown-toc--l-或---log"><code class="language-plaintext highlighter-rouge">-l 或 --log</code></a></li><li><a href="#-m-或---htmlstatus" id="markdown-toc--m-或---htmlstatus"><code class="language-plaintext highlighter-rouge">-m 或 --htmlstatus</code></a></li><li><a href="#-p-或---delaypan" id="markdown-toc--p-或---delaypan"><code class="language-plaintext highlighter-rouge">-P 或 --delaypan</code></a></li><li><a href="#-s-或---server" id="markdown-toc--s-或---server"><code class="language-plaintext highlighter-rouge">-s</code> 或 <code class="language-plaintext highlighter-rouge">--server</code></a></li><li><a href="#--serverbindip" id="markdown-toc---serverbindip"><code class="language-plaintext highlighter-rouge">--serverbindip</code></a></li><li><a href="#-t-或---multithreading" id="markdown-toc--t-或---multithreading"><code class="language-plaintext highlighter-rouge">-T 或 --multithreading</code></a></li><li><a href="#-u-或---numchannels" id="markdown-toc--u-或---numchannels"><code class="language-plaintext highlighter-rouge">-u 或 --numchannels</code></a></li><li><a href="#-z-或---startminimized" id="markdown-toc--z-或---startminimized"><code class="language-plaintext highlighter-rouge">-z 或 --startminimized</code></a></li></ul></li><li><a href="#其他选项" id="markdown-toc-其他选项">其他选项</a></li><li><a href="#通过-api-控制服务器" id="markdown-toc-通过-api-控制服务器">通过 API 控制服务器</a></li></ul></li><li><a href="#录音" id="markdown-toc-录音">录音</a><ul><li><a href="#-r-或---recording" id="markdown-toc--r-或---recording"><code class="language-plaintext highlighter-rouge">-R 或 --recording</code></a></li><li><a href="#--norecord" id="markdown-toc---norecord"><code class="language-plaintext highlighter-rouge">--norecord</code></a></li><li><a href="#控制录音" id="markdown-toc-控制录音">控制录音</a></li></ul></li><li><a href="#向服务器添加元数据" id="markdown-toc-向服务器添加元数据">向服务器添加元数据</a></li><li><a href="#桌面上的服务器" id="markdown-toc-桌面上的服务器">桌面上的服务器</a><ul><li><a href="#服务器状态图标" id="markdown-toc-服务器状态图标">服务器状态图标</a></li></ul></li><li><a href="#备份服务器" id="markdown-toc-备份服务器">备份服务器</a></li><li><a href="#故障排除" id="markdown-toc-故障排除">故障排除</a></li></ul></details><h2 id="我需要运行服务器吗">我需要运行服务器吗？</h2><p><strong>不</strong>。您不需要运行服务器。您可以使用内置目录中列出的服务器，并且无需自己运行服务器即可使用 Jamulus 。如果您知道其互联网地址，您还可以使用未列出的服务器。或者您可以使用第三方托管服务，例如<a href="https://melomax.live/jamulus-hosting/">melomax</a> 或 <a href="https://koord.live/">KOORD</a>。可能在您附近有一个服务器，您和您的朋友可以在足够低的延迟下使用，以满足大多数需求。</p><p>使用公共服务器可能会让您接触到陌生人。如果您想要一个不受干扰的会话，您可以使用 <a href="Tips-Tricks-More#在任何服务器上拥有不受干扰的会话">技巧和窍门页面</a> 中描述的独奏技术。您不会听到连接到服务器的陌生人的声音，但如果他们愿意，他们可以听到您的声音。</p><hr/><h2 id="要求">要求</h2><h3 id="速度和延迟">速度和延迟</h3><p><strong><em>服务器本身的能力(以及它所在的网络)不是 Jamulus 会话质量的主要决定因素！</em></strong></p><p>通常，问题在 <em>Client</em> 端，应该在那里解决。如果需要，请查看 <a href="/zh-CN/wiki/Client-Troubleshooting">疑难解答页面</a>。</p><p>但是，在设置服务器时也会出现各种问题——尤其是在低带宽家庭连接上运行时。在较慢的家庭连接(例如 10 Mbit/s 下行和 1 Mbit/s 上行)上拥有少于 5 个玩家通常是可以的。您可以在 <a href="Server-Bandwidth">这里的不同质量设置</a> 阅读有关网络要求的更多信息。</p><p>如果您遇到问题，请考虑使用云主机而不是您的家庭互联网连接来获得更好的 ping 时间。</p><h3 id="一般说明">一般说明</h3><ul><li>任何服务器都应具有至少 1.6GHz 的 CPU 频率和 1GB 的 RAM</li><li>运行服务器可能需要您调整在您的机器或云主机之上或之外运行的任何防火墙。</li><li>您必须在路由器上设置端口转发，才能在家里运行<a href="Unregistered-Servers">未注册服务器</a>。在大多数情况下，运行已注册服务器时通常不需要这样做。然而，某些家庭网络可能需要为已注册服务器进行端口转发。</li><li>Jamulus 提供有限的 IPv6 支持，您可以从命令行针对客户端或服务器开启。</li></ul><hr/><h2 id="安装">安装</h2><p>大多数人在第三方/云主机上运行 Jamulus，将其作为”无头”服务器（无视频显示或键盘）运行在无音频的 Linux 硬件上**。您也可以在<a href="#桌面上的服务器"><strong>桌面环境</strong></a>中运行服务器。</p><hr/><p><strong>注意</strong> 以下步骤将导致您运行 “未注册” 服务器。有关更多信息，请参阅下面的 <a href="#服务器模式">服务器模式</a>部分。</p><hr/><p>要在 Linux 上运行无头服务器，以下步骤假定您熟悉命令行以及使用 systemd 的 Debian/Ubuntu 或类似发行版。</p><ol><li><p>下载安装脚本：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> curl https://raw.githubusercontent.com/jamulussoftware/jamulus/main/linux/setup_repo.sh &gt; setup_repo.sh
</code></pre></div></div></li><li><p>使脚本可执行：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> chmod +x setup_repo.sh
</code></pre></div></div></li><li><p>运行脚本并安装无头服务器：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> sudo ./setup_repo.sh &amp;&amp; sudo apt install jamulus-headless
</code></pre></div></div></li><li><p>启用无头服务器进程：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> sudo systemctl enable jamulus-headless
</code></pre></div></div></li><li><p>将您期望的 <a href="Running-a-Server#配置选项">命令行选项</a> 添加到 systemd 服务文件中的 <code class="language-plaintext highlighter-rouge">ExecStart</code> 行：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> sudo systemctl edit --full jamulus-headless
</code></pre></div></div></li><li><p>重新加载 systemd 文件并重新启动无头服务器：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart jamulus-headless
</code></pre></div></div></li></ol><p><em>要编辑您的服务器配置，只需重复上面的最后两个步骤。</em></p><hr/><h2 id="服务器模式">服务器模式</h2><p>服务器可以根据您的需求以三种模式之一运行（无论是在家中还是在第三方主机上）。</p><h3 id="未注册模式">未注册模式</h3><p>这是首次启动服务器时的默认模式。未注册的服务器不会被目录列出，因此只有知道您服务器地址的音乐家才能连接到它。</p><p>有关运行未注册服务器的信息<a href="Unregistered-Servers">请参阅本指南</a>.**。</p><figure><img src="https://user-images.githubusercontent.com/4561747/147834838-c0c12d93-9bee-435d-8b4e-dcb006f86d20.png " loading="lazy" alt="Jamulus 未注册服务器中客户端之间的连接图"/></figure><h3 id="已注册模式">已注册模式</h3><p>在此模式下，您的服务器将出现在由目录提供的服务器列表中。Jamulus 客户端内置了一系列目录。如果您在其中一个目录中注册您的服务器，任何人都可以发现并连接到它。</p><p>或者，您可以在自定义目录中列出您的服务器（见下文）。只有当客户端输入自定义目录的互联网地址时，他们才能找到您的服务器。</p><p>请注意，目录最多只能注册 150 个服务器。如果您看到一条消息说由于目录已满而无法注册您的服务器，您可以尝试在不同的目录中注册。</p><figure><img src="https://user-images.githubusercontent.com/4561747/147834923-803ba3f9-c3a3-4c6a-90a4-fdbe5e950244.png " loading="lazy" alt="Jamulus 注册服务器中客户端之间的连接图"/></figure><h3 id="目录模式">目录模式</h3><p>如果您想运行多个服务器，也可能在防火墙后面或 LAN 上，您可能希望将您的服务器作为目录运行。示例包括在线活动、音乐协会、部分排练或学校的音乐课。</p><p>有关信息 <a href="Directories">请参阅目录指南</a></p><hr/><h2 id="配置选项">配置选项</h2><p>根据您的操作系统以及您运行服务器的方式，您可以按照以下步骤设置服务器选项并使其在重新加载之间保持不变：</p><p><strong>对于 Linux 无头服务器</strong> (使用 systemd 的 Debian/Ubuntu)</p><p>通过运行 <code class="language-plaintext highlighter-rouge">sudo systemctl edit --full jamulus-headless</code>，将您期望的命令行选项添加到 systemd 服务文件的 <code class="language-plaintext highlighter-rouge">ExecStart</code> 行中（您需要重新加载或重新启动以使更改生效。请参阅 <a href="#installation">安装文档</a>)。</p><p><strong>对于图形界面</strong> (适用于所有平台)</p><p>使用图形界面所做的任何设置都将存储在<code class="language-plaintext highlighter-rouge">Jamulusserver.ini</code> 文件中。（ <strong>切勿</strong> 手动编辑此文件！）然而，有些选项在图形用户界面中不可用，需要使用命令行进行设置。更多信息，请参阅桌面服务器。</p><hr/><h3 id="在注册模式下运行的最低设置">在注册模式下运行的最低设置</h3><p>您可以在 Linux 上使用 systemd (通过 <code class="language-plaintext highlighter-rouge">systemctl</code>) 运行无头服务器，这在其他部分有所介绍。您也可以直接从命令行运行服务器。输入以下命令以<a href="#服务器模式">运行注册服务器</a>：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jamulus-headless --nogui --server \
        --directoryaddress hostname:port \
        --serverinfo "[name];[city];[country as two-letter ISO country code or Qt5 Locale]"
</code></pre></div></div><p>有关 <code class="language-plaintext highlighter-rouge">hostname:port</code> 的值，请参见下表。</p><p><strong>注意</strong>：<code class="language-plaintext highlighter-rouge">--serverinfo</code> 参数中的 <code class="language-plaintext highlighter-rouge">[name]</code> 和 <code class="language-plaintext highlighter-rouge">[city]</code> 不允许使用分号和换行符。有关国家代码的更多信息，请参阅<a href="#服务器模式相关选项">服务器模式相关选项</a>。</p><h3 id="服务器模式相关选项">服务器模式相关选项</h3><h5 id="-e-或---directoryaddress"><code class="language-plaintext highlighter-rouge">-e 或 --directoryaddress</code></h5><p>对于 <a href="Running-a-Server#已注册模式">已注册服务器</a> 是必需的。对于将 Jamulus 作为 <a href="Directories">目录</a> 运行也是必需的。</p><p>此选项采用以下格式：</p><p><code class="language-plaintext highlighter-rouge">--directoryaddress hostname:port</code>，其中 <code class="language-plaintext highlighter-rouge">hostname</code> 是类型目录主机名，<code class="language-plaintext highlighter-rouge">port</code> 是其端口号。</p><p>要在 Jamulus 客户端内置的目录之一中进行注册，请将 <code class="language-plaintext highlighter-rouge">hostname:port</code> 替换为以下选项之一：</p><table><thead><tr><th>类型</th><th><code class="language-plaintext highlighter-rouge">主机名:端口</code></th></tr></thead><tbody><tr><td><strong>任意类型 1</strong></td><td><code class="language-plaintext highlighter-rouge">anygenre1.jamulus.io:22124</code></td></tr><tr><td><strong>任意类型 2</strong></td><td><code class="language-plaintext highlighter-rouge">anygenre2.jamulus.io:22224</code></td></tr><tr><td><strong>任意类型 3</strong></td><td><code class="language-plaintext highlighter-rouge">anygenre3.jamulus.io:22624</code></td></tr><tr><td><strong>摇滚类型</strong></td><td><code class="language-plaintext highlighter-rouge">rock.jamulus.io:22424</code></td></tr><tr><td><strong>爵士类型</strong></td><td><code class="language-plaintext highlighter-rouge">jazz.jamulus.io:22324</code></td></tr><tr><td><strong>古典/民谣类型</strong></td><td><code class="language-plaintext highlighter-rouge">classical.jamulus.io:22524</code></td></tr><tr><td><strong>合唱/理发店四重唱类型</strong></td><td><code class="language-plaintext highlighter-rouge">choral.jamulus.io:22724</code></td></tr></tbody></table><h5 id="-o-或---serverinfo"><code class="language-plaintext highlighter-rouge">-o 或 --serverinfo</code></h5><p>当您在目录中注册服务器时，这允许您提供服务器名称和位置详细信息，以便用户随后可以从他们的客户端搜索这些值。</p><p>此选项采用以下格式：</p><p><code class="language-plaintext highlighter-rouge">[name];[city];[country as two-letter ISO country code]</code></p><p>请看 <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">two-letter ISO country codes</a> (英文维基百科)</p><p><strong>注意:</strong><code class="language-plaintext highlighter-rouge">name</code>和 <code class="language-plaintext highlighter-rouge">city</code> 值中不允许使用分号和换行符。</p><h5 id="-l-或---licence"><code class="language-plaintext highlighter-rouge">-L 或 --licence</code></h5><p>在用户连接之前显示协议窗口。要显示的协议文本应作为 <code class="language-plaintext highlighter-rouge">--welcomemessage</code> 提供（见下文）。</p><h5 id="-w-或---welcomemessage"><code class="language-plaintext highlighter-rouge">-w 或 --welcomemessage</code></h5><p>连接时在客户端聊天窗口中显示的 “欢迎消息”。可以作为字符串或文件名给出，并且可以包含 HTML。使用路径时，运行 Jamulus 的用户帐户必须可以访问该文件。（在大多数 Linux 安装中，默认使用用户 <code class="language-plaintext highlighter-rouge">jamulus</code>。）如果无法访问，则将显示文字路径（而不是其内容）。</p><h5 id="--serverpublicip"><code class="language-plaintext highlighter-rouge">--serverpublicip</code></h5><p>如果连接到同一 NAT 后面的目录，则为服务器的公共 IP 地址。有关更多信息，请参阅 <a href="Directories">目录指南</a>。</p><h5 id="--directoryfile"><code class="language-plaintext highlighter-rouge">--directoryfile</code></h5><p><em>仅限目录:</em> 即使目录重新启动，也会记住已注册的服务器。有关详细信息，请参阅 <a href="Directories">目录指南</a>。</p><h5 id="-f-或---listfilter"><code class="language-plaintext highlighter-rouge">-f 或 --listfilter</code></h5><p><em>仅目录:</em> 指定哪些服务器可以在目录服务器上注册。有关详细信息，请参阅 <a href="Directories">目录指南</a>。</p><hr/><h3 id="常规服务器选项">常规服务器选项</h3><p>无论您的服务器运行在何种模式下，都可以使用这些选项（尽管某些选项可能与目录无关）。</p><h5 id="-d-或---discononquit"><code class="language-plaintext highlighter-rouge">-d 或 --discononquit</code></h5><p>通常，当服务器停止或重新启动时，任何未按下 <strong>断开连接</strong> 按钮的客户端在服务器恢复时将自动重新建立连接。此选项在这种情况下强制客户端手动重新建立与服务器的连接。</p><h5 id="-f-或---fastupdate"><code class="language-plaintext highlighter-rouge">-F 或 --fastupdate</code></h5><p>如果客户端使用 <strong>小型网络缓冲区</strong> 选项连接，则可减少延迟。需要更快的 CPU 以避免掉线，并为启用的客户端提供更多带宽。</p><h5 id="-l-或---log"><code class="language-plaintext highlighter-rouge">-l 或 --log</code></h5><p>启用日志记录，设置路径和文件名</p><h5 id="-m-或---htmlstatus"><code class="language-plaintext highlighter-rouge">-m 或 --htmlstatus</code></h5><p>启用 HTML 状态文件，设置路径和文件名</p><p><strong>注意:</strong> 此功能已弃用，可能会在未来的版本中消失。</p><h5 id="-p-或---delaypan"><code class="language-plaintext highlighter-rouge">-P 或 --delaypan</code></h5><p>启用延迟声像起始。此选项利用声音到达两只耳朵的微小时间差。与普通的 “音量” 声像相比，它产生类似于人类自然听觉的立体声音效。</p><h5 id="-s-或---server"><code class="language-plaintext highlighter-rouge">-s</code> 或 <code class="language-plaintext highlighter-rouge">--server</code></h5><p>以服务器模式启动 Jamulus</p><h5 id="--serverbindip"><code class="language-plaintext highlighter-rouge">--serverbindip</code></h5><p>指定 Jamulus 进程将绑定的 IP 地址。</p><p>通常，Jamulus 会监听主机上的所有 IP 地址。当主机有多个网络地址时，此选项允许选择其中一个地址。</p><h5 id="-t-或---multithreading"><code class="language-plaintext highlighter-rouge">-T 或 --multithreading</code></h5><p>使用多线程以更好地利用多核 CPU。此设置可能有助于服务器支持更多客户端。另请参阅 <code class="language-plaintext highlighter-rouge">--numchannels</code></p><h5 id="-u-或---numchannels"><code class="language-plaintext highlighter-rouge">-u 或 --numchannels</code></h5><p>最大通道数（客户端数）</p><h5 id="-z-或---startminimized"><code class="language-plaintext highlighter-rouge">-z 或 --startminimized</code></h5><p>以最小化窗口状态启动 Jamulus 服务器图形界面。</p><h3 id="其他选项">其他选项</h3><ul><li><code class="language-plaintext highlighter-rouge">-h</code> 者 <code class="language-plaintext highlighter-rouge">--help</code> 显示帮助文本</li><li><code class="language-plaintext highlighter-rouge">-i</code> 或 <code class="language-plaintext highlighter-rouge">--inifile</code> 设置初始化文件的位置（覆盖默认值。在 macOS 上只需提供文件名，因为配置文件只能从 <code class="language-plaintext highlighter-rouge">/Users/&lt;username&gt;/Library/Containers/app.jamulussoftware.Jamulus/Data/</code> 读取。对于服务器，将 <code class="language-plaintext highlighter-rouge">app.jamulussoftware.Jamulus</code> 替换为 <code class="language-plaintext highlighter-rouge">app.jamulussoftware.JamulusServer</code>。在 Finder 的“显示视图选项”中打开“显示库文件夹”以查看此文件夹。）</li><li><code class="language-plaintext highlighter-rouge">-n</code> 或 <code class="language-plaintext highlighter-rouge">--nogui</code> 禁用 GUI(用于 headless 模式)</li><li><code class="language-plaintext highlighter-rouge">-p</code> 或 <code class="language-plaintext highlighter-rouge">--port</code> 设置本地 UDP 端口号。默认为 22124</li><li><code class="language-plaintext highlighter-rouge">--jsonrpcport</code> 启用 JSON-RPC API 服务器来控制应用程序，设置 TCP 端口号(实验性，API 可能会更改;只能从 localhost 访问)。请参阅 <a href="https://github.com/jamulussoftware/jamulus/blob/main/docs/JSON-RPC.md">JSON-RPC API 文档文件</a>。</li><li><code class="language-plaintext highlighter-rouge">--jsonrpcsecretfile</code> 使用 <code class="language-plaintext highlighter-rouge">--jsonrpcport</code> 时需要。设置包含用于访问 JSON-RPC API 的身份验证字符串的文本文件的路径。</li><li><code class="language-plaintext highlighter-rouge">--jsonrpcbindip</code> JSON-RPC 服务器应绑定到的 IP 地址。（可选，默认为 127.0.0.1）</li><li><code class="language-plaintext highlighter-rouge">-Q</code> 或 <code class="language-plaintext highlighter-rouge">--qos</code> 设置服务质量 DS 字段字节。默认值为 128 (DSCP/CS4)。 QoS 被 Windows 忽略。要启用它，<a href="QOS-Windows">查看此页面</a></li><li><code class="language-plaintext highlighter-rouge">-t</code> 或 <code class="language-plaintext highlighter-rouge">--notranslation</code>禁用 UI 语言翻译</li><li><code class="language-plaintext highlighter-rouge">-6</code> 或 <code class="language-plaintext highlighter-rouge">--enableipv6</code> 启用 IPv6 寻址(始终启用 IPv4)</li><li><code class="language-plaintext highlighter-rouge">-v</code> 或 <code class="language-plaintext highlighter-rouge">--version</code> 输出版本信息并退出</li></ul><h3 id="通过-api-控制服务器">通过 API 控制服务器</h3><p>Jamulus 可以通过一个实验性的、可能会发生变化的 API 进行控制。您可以在<a href="https://github.com/jamulussoftware/jamulus/blob/main/docs/JSON-RPC.md">主存储库中找到记录的 JSON-RPC API</a>。JSON-RPC 允许您控制一些功能，例如更改欢迎消息或从经过身份验证的外部应用程序以无头模式启动录音。它在服务器运行时起作用。</p><hr/><h2 id="录音">录音</h2><h5 id="-r-或---recording"><code class="language-plaintext highlighter-rouge">-R 或 --recording</code></h5><p>设置服务器的录音目录。默认情况下，当会话处于活动状态时，服务器将进行录音。</p><p><strong>注意:</strong> 您需要将录音内容保存到 Jamulus 主目录之外的路径，或者从您的 systemd 单元文件中删除 <code class="language-plaintext highlighter-rouge">ProtectHome=true</code> ，但请注意，这样做可能存在安全风险。</p><p>录音内容为每条音轨的 <a href="https://www.audacityteam.org/">Audacity</a><code class="language-plaintext highlighter-rouge">.lof</code> 格式和 <a href="https://en.wikipedia.org/wiki/REAPER">REAPER</a><code class="language-plaintext highlighter-rouge">.rpp</code> 格式。在相应的应用程序中打开这些文件以播放它们。</p><p><strong>注意:</strong> 当您的服务器正在录音时，客户端会显示一条红色横幅消息，表明会话正在录音。</p><h5 id="--norecord"><code class="language-plaintext highlighter-rouge">--norecord</code></h5><p>在配置录音时，默认设置服务器不进行录音。</p><h3 id="控制录音">控制录音</h3><p>录音在第一个人连接到服务器时开始，并在最后一个人离开时停止。</p><p>如果服务器在录音过程中收到 SIGUSR1 信号，它将在新目录中开始新的录音。SIGUSR2 将切换录音的开/关。如果启用了 <a href="https://github.com/jamulussoftware/jamulus/blob/main/docs/JSON-RPC.md">JSON-RPC</a> ，您还能够以类似于图形用户界面的方式管理服务器。请参阅（实验性的）关于录音器的 <a href="https://github.com/jamulussoftware/jamulus/blob/main/docs/JSON-RPC.md#jamulusserverstartrecording">JSON-RPC 文档</a>。</p><p>要使用 systemd 发送这些信号，请在 <code class="language-plaintext highlighter-rouge">/etc/systemd/system</code> 中创建以下两个 <code class="language-plaintext highlighter-rouge">.service</code> 文件，将它们命名为适当的名称(例如 <code class="language-plaintext highlighter-rouge">jamulusTogglerec.service</code>)。</p><p>要打开或关闭录音（取决于当前状态）：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [Unit]
 Description=Toggle recording state of Jamulus Server
 Requisite=Jamulus-Server

 [Service]
 Type=oneshot
 ExecStart=/bin/systemctl kill -s SIGUSR2 jamulus-headless
</code></pre></div></div><p>要开始新的录音：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [Unit]
 Description=Start a new recording on Jamulus Server
 Requisite=Jamulus-Server

 [Service]
 Type=oneshot
 ExecStart=/bin/systemctl kill -s SIGUSR1 jamulus-headless
</code></pre></div></div><p>_注意：<code class="language-plaintext highlighter-rouge">ExecStart</code> 行中的 Jamulus 服务名称需要与 systemd 用于控制您的 Jamulus 服务器的 <code class="language-plaintext highlighter-rouge">.service</code> 文件名相同。默认情况下，如果您使用存储库中的 <code class="language-plaintext highlighter-rouge">.deb</code> 文件，它是 <code class="language-plaintext highlighter-rouge">jamulus-headless</code>，如本例所示。</p><p>运行 <code class="language-plaintext highlighter-rouge">sudo systemctl daemon-reload</code> 以注册它们以供首次使用。</p><p>现在您可以使用 <code class="language-plaintext highlighter-rouge">systemctl</code> 命令运行这些命令，例如:</p><p><code class="language-plaintext highlighter-rouge">sudo systemctl start jamulusTogglerec</code></p><p>如果您运行 <code class="language-plaintext highlighter-rouge">systemctl status jamulus-headless</code> （或者您手动指定的相应服务名称），您可以看到这些命令的结果。您还可以查看您的（系统）日志。</p><hr/><h2 id="向服务器添加元数据">向服务器添加元数据</h2><p>您可以向服务器的欢迎消息中添加元数据，以添加额外的隐藏信息，如联系信息或对机器人的策略请求(这类似于 <a href="https://en.wikipedia.org/wiki/Robots.txt">robots.txt</a>) (英文维基百科)。有关更多信息，请参阅 <a href="/zh-CN/kb/2023/07/30/Server-Metadata.html">关于元数据的社区知识库条目</a>。</p><hr/><h2 id="桌面上的服务器">桌面上的服务器</h2><p>Jamulus 可以在计算机的图形环境中以服务器模式运行。这为您提供了一个图形用户界面来控制大多数设置。要做到这一点，首先<a href="Getting-Started">为您的平台安装 Jamulus</a> ，然后执行以下操作之一：</p><ul><li><p><strong>Windows 用户</strong> - 使用 Windows 开始菜单中的 “Jamulus 服务器” 图标。如果您希望服务器在 Windows 启动时自动启动，请勾选此选项的复选框。</p></li><li><p><strong>macOS 用户</strong> - 双击应用程序中的 “Jamulus 服务器” 图标。</p></li><li><p><strong>Linux 用户</strong> - 启动“Jamulus 服务器”快捷方式。或者你可以打开一个终端窗口(Debian 和相关发行版上的<code class="language-plaintext highlighter-rouge">CTRL+ALT+t</code>)，输入<code class="language-plaintext highlighter-rouge">jamulus -s</code> 然后回车。</p></li></ul><p>虽然 Jamulus 中的大多数常见功能可以使用图形界面（GUI）进行设置，但其他一些功能只能在服务器启动时在终端窗口中使用给定的选项进行设置。具体的操作方式将取决于您的操作系统。</p><p>例如在 Windows 上，要使用特定的设置文件，请右键单击 Jamulus 快捷方式并选择<strong>属性</strong>&gt;<strong>目标</strong>。将必要的参数添加到 Jamulus.exe:</p><p><code class="language-plaintext highlighter-rouge">"C:\Program Files\Jamulus\Jamulus.exe" --serverbindip 192.168.0.100</code></p><p>对于 macOS，启动终端窗口并使用所需的选项运行 Jamulus，如下所示:</p><p><code class="language-plaintext highlighter-rouge">/Applications/Jamulus.app/Contents/MacOS/Jamulus --serverbindip 192.168.0.100</code></p><p><strong>注意</strong> 命令行选项将在启动时设置服务器的默认值。在服务器运行时，您可以使用其相应的图形用户界面控件覆盖它们。</p><h3 id="服务器状态图标">服务器状态图标</h3><p>当服务器在图形用户界面模式下运行时，操作系统将在系统托盘或状态栏中显示一个图标，指示服务器是否有连接：</p><figure><img src="https://raw.githubusercontent.com/jamulussoftware/jamulus/main/src/res/servertrayiconinactive.png " style="float:left; margin-right:10px;" loading="lazy" alt="Jamulus 服务器图标的图片"/></figure><p>服务器为空</p><figure><img src="https://raw.githubusercontent.com/jamulussoftware/jamulus/main/src/res/servertrayiconactive.png " style="float:left; margin-right:10px;" loading="lazy" alt="Jamulus 服务器图标图片"/></figure><p>服务器被占用</p><hr/><h2 id="备份服务器">备份服务器</h2><p>安装并运行后，您可能需要保留设置的副本。备份总是一个好主意，并且设置文件在 Jamulus 版本之间不向后兼容。所以如果你想回到以前的版本，你需要恢复你的设置。</p><p>要在 Windows 上查找您的设置文件，请在搜索栏中键入“%APPDATA%”并查找名为“Jamulus”的文件夹。此文件夹中将有一个或多个 <code class="language-plaintext highlighter-rouge">.ini</code> 文件。现在备份 Jamulus 的设置。</p><p>对于所有其他平台，请从命令行运行以下命令以查找其所在的位置并将文件复制到其他位置:</p><p><code class="language-plaintext highlighter-rouge">find ~ -name Jamulus.ini -ls</code></p><p>如果您使用 <code class="language-plaintext highlighter-rouge">--inifile</code> 参数将 inifile 保存到其他位置，请不要忘记同时备份这些文件。 <strong>注意事项</strong></p><ul><li>在 Jamulus 运行时不要备份或恢复设置文件。</li><li>不建议手动编辑设置文件(它们不是为此而设计的)。</li><li><p>您可以通过删除设置文件(关闭 Jamulus 后)将所有设置恢复为默认值。</p></li><li>无头服务器不使用 <code class="language-plaintext highlighter-rouge">.ini</code> 文件。所有配置都作为命令行选项给出。如果您以图形用户界面模式运行服务器，在启动时读取任何命令行选项后，它将把配置存储在 <code class="language-plaintext highlighter-rouge">Jamulusserver.ini</code> 文件中。</li></ul><h2 id="故障排除">故障排除</h2><p>如果您遇到其他问题，<a href="Server-Troubleshooting">请参阅本指南</a>。</p></main></div></div><footer class="fx-row fx-row-around-xs" id="footer"><div class="fx-col-100-xs fx-col-33-s fx-col-center-xs"><a href="https://github.com/jamulussoftware/jamulus" target="_blank" rel="noreferrer"><img src="/assets/img/github.svg" alt="Jamulus GitHub 存储库" loading="lazy" class="fx-center"></a></div><div class="fx-col-100-xs fx-col-33-s fx-col-center-xs"><a href="https://www.facebook.com/groups/619274602254947/" target="_blank" rel="noreferrer"><img src="/assets/img/facebook.svg" alt="Jamulus Facebook 群组" id="fb_icon" loading="lazy" class="fx-center"></a></div><div class="fx-col-100-xs fx-col-33-s fx-col-center-xs"><a href="https://github.com/jamulussoftware/jamulus/discussions" target="_blank" rel="noreferrer"><img src="/assets/img/forum.svg" alt="帮助和支持" loading="lazy" class="fx-center"></a></div><div id="copyright" class="fx-col-100-xs fx-row-center-xs"><a href="https://github.com/corrados" target="_blank" rel="noreferrer">Volker Fischer</a> 和 <a href="https://github.com/jamulussoftware/jamulus/graphs/contributors" target="_blank" rel="noreferrer"> 贡献者</a> 的软件 - 想要 <a href="/zh-CN/wiki/Contribution"> 参与吗？</a><div id="asio-footer"> ASIO &reg; compatible - ASIO 是 Steinberg Media Technologies GmbH 的商标和软件 </div></div></footer><script>var ja=window.navigator.language||window.navigator.userLanguage,mu=document.documentElement.lang,lus=["en","sv-SE","zh-CN","nb-NO","ko-KR","pt-BR","pt-PT","nl","es","de","it","fr"],regex=RegExp("^"+mu);regex.test(ja)||lus.forEach(function(e){ja.match("^"+e)&&(document.getElementById("langselect").classList.add("chlang","red"),document.getElementById("suglang").style.display="block",document.querySelectorAll("[data-slang="+e+"]")[0].classList.add("proplang"))});</script></body></html>